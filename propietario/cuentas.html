<!DOCTYPE html>
<html lang="es">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Estado de Cuenta - Propietario</title>

  <!-- Google Fonts: Roboto -->
  <link href="https://fonts.googleapis.com/css2?family=Roboto&display=swap" rel="stylesheet" />

  <link rel="stylesheet" href="cuentas.css" />
  <link rel="stylesheet" href="/style.css" />
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />

  <style>
    /* Aplicar Roboto globalmente */
    body,
    button,
    input,
    select,
    textarea,
    h1,
    h2,
    h3,
    h4,
    h5,
    h6,
    p,
    span,
    div,
    a,
    label,
    li {
      font-family: 'Roboto', sans-serif !important;
    }
  </style>
</head>

<body class="bg-light">
  <header>
    <div class="left">
      <div class="menu-container">
        <div class="menu" id="menu">
          <div></div>
          <div></div>
          <div></div>
        </div>
      </div>
      <div class="brand">
        <img src="/condominio.avif" alt="icono-condominio" class="logo" />
        <span class="name">Gestión de condominio</span>
      </div>
    </div>
    <div class="logout">
      <button class="btn btn-sm" style="background-color: white; font-size: 15px; font-weight: 700;" onclick="logout()">
        Cerrar sesión
      </button>
    </div>
  </header>

  <div class="sidebar" id="sidebar">
    <nav>
      <ul>
        <li><a href="propietario.html"><img src="/icons/home.svg" alt="Inicio" /><span>Inicio</span></a></li>
        <li class="sidebar-item"><a href="pagos.html"><img src="/icons/pago.svg" alt="Pagos" /><span>Pagos</span></a>
        </li>
        <li class="sidebar-item"><a href="cuentas.html" class="selected"><img src="/icons/cuentas.svg"
              alt="Cuentas" /><span>Cuentas</span></a></li>
        <li><a href="calendario.html"><img src="/icons/calendario.svg" alt="Calendario" /><span>Calendario</span></a>
        </li>
        <li><a href="avisos.html"><img src="/icons/avisos.svg" alt="Avisos" /><span>Avisos</span></a></li>
        <li><a href="ajustes.html"><img src="/icons/setting.svg" alt=""><span>Ajustes</span></a></li>
      </ul>
    </nav>
  </div>

  <div class="container py-4" style="margin-top: 4rem;">
    <h2 class="mb-4 text-center">📄 Estado de Cuenta</h2>

    <div class="alert alert-warning d-flex align-items-center" role="alert">
      <span class="me-2">⚠️</span>
      <div>
        Este mes tienes una deuda pendiente. Tu pago está en revisión.
        <a href="pagos.html" class="btn btn-sm btn-warning ms-2">Ir a Pagos</a>
      </div>
    </div>

    <div class="d-flex justify-content-between align-items-center mb-3">
      <div>
        <select class="form-select form-select-sm w-auto" id="selectAnio" onchange="actualizarResumen()">
          <option value="2025" selected>2025</option>
          <option value="2024">2024</option>
        </select>
      </div>
      <div>
        <button class="btn btn-outline-primary btn-sm" data-bs-toggle="modal" data-bs-target="#modalDescarga">
          📥 Descargar Estado de Cuenta
        </button>
      </div>
    </div>

    <!-- Resumen de Totales -->
    <div class="row text-center mb-4">
      <div class="col-md-4">
        <div class="p-3 rounded text-white bg-success">
          <h5>Total Pagado</h5>
          <p class="mb-0 fw-bold" id="totalPagado">$360.000</p>
        </div>
      </div>
      <div class="col-md-4">
        <div class="p-3 rounded text-white bg-danger">
          <h5>Total Pendiente</h5>
          <p class="mb-0 fw-bold" id="totalPendiente">$120.000</p>
        </div>
      </div>
      <div class="col-md-4">
        <div class="p-3 rounded text-white bg-primary">
          <h5>Saldo Actual</h5>
          <p class="mb-0 fw-bold" id="saldoActual">$480.000</p>
        </div>
      </div>
    </div>


    <div class="card mb-4 card-compact card-reducida mx-auto">
      <div class="card-header bg-secondary text-white text-center">Resumen Mensual</div>
      <div class="card-body">
        <table class="table table-hover text-center align-middle">
          <thead class="table-light">
            <tr>
              <th>Mes</th>
              <th>Monto</th>
              <th>Estado</th>
            </tr>
          </thead>
          <tbody id="tablaEstado">
            <tr>
              <td>Julio 2025</td>
              <td>$120</td>
              <td><span class="badge bg-danger">⛔ Pendiente</span></td>
            </tr>
            <tr>
              <td>Junio 2025</td>
              <td>$120</td>
              <td><span class="badge bg-success">✔️ Pagado</span></td>
            </tr>
            <tr>
              <td>Mayo 2025</td>
              <td>$120</td>
              <td><span class="badge bg-success">✔️ Pagado</span></td>
            </tr>
            <tr>
              <td>Abril 2025</td>
              <td>$120</td>
              <td><span class="badge bg-success">✔️ Pagado</span></td>
            </tr>
            <tr>
              <td>Marzo 2025</td>
              <td>$120</td>
              <td><span class="badge bg-success">✔️ Pagado</span></td>
            </tr>
            <tr>
              <td>Febrero 2025</td>
              <td>$120</td>
              <td><span class="badge bg-success">✔️ Pagado</span></td>
            </tr>
            <tr>
              <td>Enero 2025</td>
              <td>$120</td>
              <td><span class="badge bg-success">✔️ Pagado</span></td>
            </tr>
            <tr>
              <td>Diciembre 2024</td>
              <td>$120</td>
              <td><span class="badge bg-success">✔️ Pagado</span></td>
            </tr>
            <tr>
              <td>Noviembre 2024</td>
              <td>$120</td>
              <td><span class="badge bg-success">✔️ Pagado</span></td>
            </tr>
            <tr>
              <td>Octubre 2024</td>
              <td>$120</td>
              <td><span class="badge bg-success">✔️ Pagado</span></td>
            </tr>
          </tbody>

        </table>
      </div>
    </div>
  </div>

  <!-- Modal Descarga -->
  <div class="modal fade" id="modalDescarga" tabindex="-1" aria-labelledby="modalDescargaLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="modalDescargaLabel">Descargar Estado de Cuenta</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Cerrar"></button>
        </div>
        <div class="modal-body">
          Selecciona el formato de descarga:
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
          <button type="button" class="btn btn-primary" onclick="descargar('pdf')">📄 PDF</button>
          <button type="button" class="btn btn-success" onclick="descargar('csv')">📊 CSV</button>
        </div>
      </div>
    </div>
  </div>

  <script>
    function descargar(formato) {
      const modal = bootstrap.Modal.getInstance(document.getElementById('modalDescarga'));
      modal.hide();
      setTimeout(() => {
        // Código para descarga (por implementar)
      }, 500);
    }

    function actualizarResumen() {
      const anio = document.getElementById("selectAnio").value;
      const tabla = document.getElementById("tablaEstado");
      const pagado = document.getElementById("totalPagado");
      const pendiente = document.getElementById("totalPendiente");
      const saldo = document.getElementById("saldoActual");

      if (anio === "2025") {
        tabla.innerHTML = `
      <tr><td>Julio 2025</td><td>$120</td><td><span class="badge bg-danger">⛔ Pendiente</span></td></tr>
      <tr><td>Junio 2025</td><td>$120</td><td><span class="badge bg-success">✔️ Pagado</span></td></tr>
      <tr><td>Mayo 2025</td><td>$120</td><td><span class="badge bg-success">✔️ Pagado</span></td></tr>
      <tr><td>Abril 2025</td><td>$120</td><td><span class="badge bg-success">✔️ Pagado</span></td></tr>
      <tr><td>Marzo 2025</td><td>$120</td><td><span class="badge bg-success">✔️ Pagado</span></td></tr>
      <tr><td>Febrero 2025</td><td>$120</td><td><span class="badge bg-success">✔️ Pagado</span></td></tr>
      <tr><td>Enero 2025</td><td>$120</td><td><span class="badge bg-success">✔️ Pagado</span></td></tr>
      <tr><td>Diciembre 2024</td><td>$120</td><td><span class="badge bg-success">✔️ Pagado</span></td></tr>
      <tr><td>Noviembre 2024</td><td>$120</td><td><span class="badge bg-success">✔️ Pagado</span></td></tr>
      <tr><td>Octubre 2024</td><td>$120</td><td><span class="badge bg-success">✔️ Pagado</span></td></tr>
    `;
        pagado.textContent = "$1.080";   // 9 meses pagados x 120.000
        pendiente.textContent = "$120";  // Julio pendiente
        saldo.textContent = "$1.200";    // Total (pagado + pendiente)
      } else if (anio === "2024") {
        tabla.innerHTML = `
      <tr><td>Diciembre 2024</td><td>$120</td><td><span class="badge bg-success">✔️ Pagado</span></td></tr>
      <tr><td>Noviembre 2024</td><td>$120</td><td><span class="badge bg-success">✔️ Pagado</span></td></tr>
      <tr><td>Octubre 2024</td><td>$120</td><td><span class="badge bg-success">✔️ Pagado</span></td></tr>
    `;
        pagado.textContent = "$360";
        pendiente.textContent = "$0";
        saldo.textContent = "$360";
      }
    }
  </script>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  <script src="/script.js"></script>
</body>

</html>